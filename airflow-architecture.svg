<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: AirflowArchitecture Pages: 1 -->
<svg width="4562pt" height="3600pt"
 viewBox="0.00 0.00 1095.00 864.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(4.17 4.17) rotate(0) translate(4 860)">
<title>AirflowArchitecture</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-860 1091,-860 1091,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_external</title>
<polygon fill="lightgrey" stroke="lightgrey" points="655,-354 655,-568 783,-568 783,-354 655,-354"/>
<text text-anchor="middle" x="719" y="-554.4" font-family="Arial Bold" font-size="12.00">ğŸŒ External Access</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_kubernetes</title>
<polygon fill="none" stroke="blue" stroke-dasharray="5,2" points="8,-8 8,-848 647,-848 647,-8 8,-8"/>
<text text-anchor="middle" x="327.5" y="-834.4" font-family="Arial Bold" font-size="12.00">â˜¸ï¸ Kubernetes Cluster</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_ingress</title>
<polygon fill="#fff3e0" stroke="#fff3e0" points="417,-726 417,-818 543,-818 543,-726 417,-726"/>
<text text-anchor="middle" x="480" y="-805.2" font-family="Arial Bold" font-size="11.00">ğŸ”€ Ingress Layer</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_prelogin</title>
<polygon fill="#f3e5f5" stroke="#f3e5f5" points="16,-338 16,-698 304,-698 304,-338 16,-338"/>
<text text-anchor="middle" x="160" y="-685.2" font-family="Arial Bold" font-size="11.00">ğŸ¨ Pre&#45;Login Layer</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_prelogin_pod</title>
<path fill="none" stroke="purple" d="M36,-346C36,-346 284,-346 284,-346 290,-346 296,-352 296,-358 296,-358 296,-554 296,-554 296,-560 290,-566 284,-566 284,-566 36,-566 36,-566 30,-566 24,-560 24,-554 24,-554 24,-358 24,-358 24,-352 30,-346 36,-346"/>
<text text-anchor="middle" x="160" y="-553.2" font-family="Arial Bold" font-size="11.00">ğŸ“¦ Pre&#45;Login Pod</text>
</g>
<g id="clust6" class="cluster">
<title>cluster_airflow</title>
<polygon fill="#e8f5e9" stroke="#e8f5e9" points="312,-16 312,-446 639,-446 639,-16 312,-16"/>
<text text-anchor="middle" x="475.5" y="-433.2" font-family="Arial Bold" font-size="11.00">âœˆï¸ Airflow 3.1.4 Layer</text>
</g>
<g id="clust7" class="cluster">
<title>cluster_airflow_pod</title>
<path fill="none" stroke="green" d="M332,-24C332,-24 619,-24 619,-24 625,-24 631,-30 631,-36 631,-36 631,-288 631,-288 631,-294 625,-300 619,-300 619,-300 332,-300 332,-300 326,-300 320,-294 320,-288 320,-288 320,-36 320,-36 320,-30 326,-24 332,-24"/>
<text text-anchor="middle" x="475.5" y="-287.2" font-family="Arial Bold" font-size="11.00">ğŸ“¦ Airflow Webserver Pod</text>
</g>
<g id="clust8" class="cluster">
<title>cluster_keycloak</title>
<polygon fill="#fce4ec" stroke="#fce4ec" points="700,-208 700,-302 976,-302 976,-208 700,-208"/>
<text text-anchor="middle" x="838" y="-288.4" font-family="Arial Bold" font-size="12.00">ğŸ”‘ Keycloak (OIDC Provider)</text>
</g>
<!-- user -->
<g id="node1" class="node">
<title>user</title>
<ellipse fill="#e1f5ff" stroke="black" cx="700" cy="-500" rx="31.4" ry="18"/>
<text text-anchor="middle" x="700" y="-497.5" font-family="Arial" font-size="10.00">ğŸ‘¤ User</text>
</g>
<!-- browser -->
<g id="node2" class="node">
<title>browser</title>
<path fill="#e1f5ff" stroke="black" d="M742.5,-398C742.5,-398 675.5,-398 675.5,-398 669.5,-398 663.5,-392 663.5,-386 663.5,-386 663.5,-374 663.5,-374 663.5,-368 669.5,-362 675.5,-362 675.5,-362 742.5,-362 742.5,-362 748.5,-362 754.5,-368 754.5,-374 754.5,-374 754.5,-386 754.5,-386 754.5,-392 748.5,-398 742.5,-398"/>
<text text-anchor="middle" x="709" y="-377.5" font-family="Arial" font-size="10.00">ğŸŒ Web Browser</text>
</g>
<!-- user&#45;&gt;browser -->
<g id="edge1" class="edge">
<title>user&#45;&gt;browser</title>
<path fill="none" stroke="blue" d="M701.31,-481.84C702.78,-462.53 705.19,-430.89 706.93,-408.2"/>
<polygon fill="blue" stroke="blue" points="710.42,-408.42 707.69,-398.18 703.44,-407.88 710.42,-408.42"/>
<text text-anchor="middle" x="740.5" y="-456.8" font-family="Arial" font-size="9.00" fill="blue">1ï¸âƒ£ HTTPS Access</text>
</g>
<!-- ingress -->
<g id="node3" class="node">
<title>ingress</title>
<path fill="#fff3e0" stroke="black" d="M523,-770C523,-770 437,-770 437,-770 431,-770 425,-764 425,-758 425,-758 425,-746 425,-746 425,-740 431,-734 437,-734 437,-734 523,-734 523,-734 529,-734 535,-740 535,-746 535,-746 535,-758 535,-758 535,-764 529,-770 523,-770"/>
<text text-anchor="middle" x="480" y="-755" font-family="Arial" font-size="10.00">ğŸ“¡ Ingress Controller</text>
<text text-anchor="middle" x="480" y="-744" font-family="Arial" font-size="10.00">airflow.example.com</text>
</g>
<!-- browser&#45;&gt;ingress -->
<g id="edge2" class="edge">
<title>browser&#45;&gt;ingress</title>
<path fill="none" stroke="blue" d="M696.62,-398.01C684.65,-413.11 665.12,-434.52 643,-446 625.36,-455.16 614.4,-441.43 599,-454 513.33,-523.95 488.94,-664.75 482.33,-723.88"/>
<polygon fill="blue" stroke="blue" points="478.83,-723.63 481.29,-733.93 485.8,-724.35 478.83,-723.63"/>
<text text-anchor="middle" x="535.5" y="-583.8" font-family="Arial" font-size="9.00" fill="blue">2ï¸âƒ£ GET /</text>
</g>
<!-- browser&#45;&gt;ingress -->
<g id="edge7" class="edge">
<title>browser&#45;&gt;ingress</title>
<path fill="none" stroke="green" d="M698.29,-398.31C661.51,-457.73 540.26,-653.63 496.19,-724.84"/>
<polygon fill="green" stroke="green" points="493.02,-723.31 490.74,-733.65 498.98,-726.99 493.02,-723.31"/>
<text text-anchor="middle" x="621" y="-588.8" font-family="Arial" font-size="9.00" fill="green">7ï¸âƒ£ Click &quot;Login&quot;</text>
<text text-anchor="middle" x="621" y="-578.8" font-family="Arial" font-size="9.00" fill="green">Redirect to /login</text>
</g>
<!-- airflow_web -->
<g id="node9" class="node">
<title>airflow_web</title>
<path fill="#e8f5e9" stroke="black" d="M459.5,-252C459.5,-252 340.5,-252 340.5,-252 334.5,-252 328.5,-246 328.5,-240 328.5,-240 328.5,-228 328.5,-228 328.5,-222 334.5,-216 340.5,-216 340.5,-216 459.5,-216 459.5,-216 465.5,-216 471.5,-222 471.5,-228 471.5,-228 471.5,-240 471.5,-240 471.5,-246 465.5,-252 459.5,-252"/>
<text text-anchor="middle" x="400" y="-237" font-family="Arial" font-size="10.00">ğŸŒ Airflow Webserver</text>
<text text-anchor="middle" x="400" y="-226" font-family="Arial" font-size="10.00">v3.1.4 (Astronomer Runtime)</text>
</g>
<!-- browser&#45;&gt;airflow_web -->
<g id="edge23" class="edge">
<title>browser&#45;&gt;airflow_web</title>
<path fill="none" stroke="darkgreen" stroke-dasharray="5,2" d="M687.8,-361.88C675.49,-353 659.25,-342.99 643,-338 622.06,-331.56 464.32,-342.01 446,-330 422.85,-314.82 411,-284.47 405.18,-262.15"/>
<polygon fill="darkgreen" stroke="darkgreen" points="408.54,-261.17 402.85,-252.23 401.73,-262.77 408.54,-261.17"/>
<text text-anchor="middle" x="507" y="-317.8" font-family="Arial" font-size="9.00" fill="darkgreen">2ï¸âƒ£2ï¸âƒ£ Access granted per role</text>
</g>
<!-- keycloak -->
<g id="node12" class="node">
<title>keycloak</title>
<path fill="#fce4ec" stroke="black" d="M800,-252C800,-252 720,-252 720,-252 714,-252 708,-246 708,-240 708,-240 708,-228 708,-228 708,-222 714,-216 720,-216 720,-216 800,-216 800,-216 806,-216 812,-222 812,-228 812,-228 812,-240 812,-240 812,-246 806,-252 800,-252"/>
<text text-anchor="middle" x="760" y="-237" font-family="Arial" font-size="10.00">ğŸ” Keycloak Server</text>
<text text-anchor="middle" x="760" y="-226" font-family="Arial" font-size="10.00">Identity Provider</text>
</g>
<!-- browser&#45;&gt;keycloak -->
<g id="edge15" class="edge">
<title>browser&#45;&gt;keycloak</title>
<path fill="none" stroke="red" d="M754.63,-370.66C777.81,-363.87 803.97,-351.69 818,-330 833.42,-306.16 812.03,-278.38 791,-259.05"/>
<polygon fill="red" stroke="red" points="793.17,-256.29 783.34,-252.33 788.55,-261.55 793.17,-256.29"/>
<text text-anchor="middle" x="859.5" y="-317.8" font-family="Arial" font-size="9.00" fill="red">1ï¸âƒ£5ï¸âƒ£ Credentials</text>
</g>
<!-- prelogin_svc -->
<g id="node4" class="node">
<title>prelogin_svc</title>
<path fill="#f3e5f5" stroke="black" d="M283.5,-650C283.5,-650 202.5,-650 202.5,-650 196.5,-650 190.5,-644 190.5,-638 190.5,-638 190.5,-626 190.5,-626 190.5,-620 196.5,-614 202.5,-614 202.5,-614 283.5,-614 283.5,-614 289.5,-614 295.5,-620 295.5,-626 295.5,-626 295.5,-638 295.5,-638 295.5,-644 289.5,-650 283.5,-650"/>
<text text-anchor="middle" x="243" y="-635" font-family="Arial" font-size="10.00">âš™ï¸ Service: prelogin</text>
<text text-anchor="middle" x="243" y="-624" font-family="Arial" font-size="10.00">ClusterIP:8080</text>
</g>
<!-- ingress&#45;&gt;prelogin_svc -->
<g id="edge3" class="edge">
<title>ingress&#45;&gt;prelogin_svc</title>
<path fill="none" stroke="blue" d="M424.67,-745.63C394.64,-740.95 357.71,-732.23 328,-716 301.67,-701.62 277.81,-676.78 262.13,-658.01"/>
<polygon fill="blue" stroke="blue" points="264.74,-655.68 255.72,-650.13 259.31,-660.1 264.74,-655.68"/>
<text text-anchor="middle" x="370.5" y="-708.8" font-family="Arial" font-size="9.00" fill="blue">3ï¸âƒ£ Route to prelogin</text>
</g>
<!-- ingress&#45;&gt;prelogin_svc -->
<g id="edge8" class="edge">
<title>ingress&#45;&gt;prelogin_svc</title>
<path fill="none" stroke="green" d="M456.8,-733.85C444.2,-724.95 428.14,-714.24 413,-706 376.15,-685.94 332.66,-667.35 298.88,-653.95"/>
<polygon fill="green" stroke="green" points="299.77,-650.54 289.18,-650.13 297.21,-657.05 299.77,-650.54"/>
<text text-anchor="middle" x="435" y="-708.8" font-family="Arial" font-size="9.00" fill="green">8ï¸âƒ£</text>
</g>
<!-- nginx -->
<g id="node5" class="node">
<title>nginx</title>
<path fill="#f3e5f5" stroke="black" d="M239.5,-518C239.5,-518 204.5,-518 204.5,-518 198.5,-518 192.5,-512 192.5,-506 192.5,-506 192.5,-494 192.5,-494 192.5,-488 198.5,-482 204.5,-482 204.5,-482 239.5,-482 239.5,-482 245.5,-482 251.5,-488 251.5,-494 251.5,-494 251.5,-506 251.5,-506 251.5,-512 245.5,-518 239.5,-518"/>
<text text-anchor="middle" x="222" y="-503" font-family="Arial" font-size="10.00">ğŸ”§ Nginx</text>
<text text-anchor="middle" x="222" y="-492" font-family="Arial" font-size="10.00">Port 8080</text>
</g>
<!-- prelogin_svc&#45;&gt;nginx -->
<g id="edge4" class="edge">
<title>prelogin_svc&#45;&gt;nginx</title>
<path fill="none" stroke="blue" d="M226.19,-613.82C222.05,-608.53 218.18,-602.39 216,-596 208.53,-574.09 211.03,-547.72 214.83,-528.32"/>
<polygon fill="blue" stroke="blue" points="218.29,-528.86 217.01,-518.34 211.46,-527.36 218.29,-528.86"/>
<text text-anchor="middle" x="222" y="-583.8" font-family="Arial" font-size="9.00" fill="blue">4ï¸âƒ£</text>
</g>
<!-- prelogin_svc&#45;&gt;nginx -->
<g id="edge9" class="edge">
<title>prelogin_svc&#45;&gt;nginx</title>
<path fill="none" stroke="green" d="M240.21,-613.74C236.68,-591.88 230.56,-553.99 226.4,-528.22"/>
<polygon fill="green" stroke="green" points="229.85,-527.65 224.8,-518.33 222.94,-528.76 229.85,-527.65"/>
<text text-anchor="middle" x="243" y="-583.8" font-family="Arial" font-size="9.00" fill="green">9ï¸âƒ£</text>
</g>
<!-- html -->
<g id="node6" class="node">
<title>html</title>
<polygon fill="#f3e5f5" stroke="black" points="132,-398 32,-398 32,-362 138,-362 138,-392 132,-398"/>
<polyline fill="none" stroke="black" points="132,-398 132,-392 "/>
<polyline fill="none" stroke="black" points="138,-392 132,-392 "/>
<text text-anchor="middle" x="85" y="-383" font-family="Arial" font-size="10.00">ğŸ“„ index.html</text>
<text text-anchor="middle" x="85" y="-372" font-family="Arial" font-size="10.00">Static branding page</text>
</g>
<!-- nginx&#45;&gt;html -->
<g id="edge5" class="edge">
<title>nginx&#45;&gt;html</title>
<path fill="none" stroke="blue" d="M192.12,-492.62C173.46,-487.42 149.86,-478.51 133,-464 115.43,-448.88 102.78,-425.66 94.89,-407.62"/>
<polygon fill="blue" stroke="blue" points="98.05,-406.12 90.99,-398.22 91.58,-408.79 98.05,-406.12"/>
<text text-anchor="middle" x="175.5" y="-456.8" font-family="Arial" font-size="9.00" fill="blue">5ï¸âƒ£ Serve static page</text>
</g>
<!-- nginx_conf -->
<g id="node7" class="node">
<title>nginx_conf</title>
<polygon fill="#f3e5f5" stroke="black" points="282,-406 156,-406 156,-354 288,-354 288,-400 282,-406"/>
<polyline fill="none" stroke="black" points="282,-406 282,-400 "/>
<polyline fill="none" stroke="black" points="288,-400 282,-400 "/>
<text text-anchor="middle" x="222" y="-394" font-family="Arial" font-size="10.00">âš™ï¸ nginx.conf</text>
<text text-anchor="middle" x="222" y="-383" font-family="Arial" font-size="10.00">â€¢ Serves / â†’ index.html</text>
<text text-anchor="middle" x="222" y="-372" font-family="Arial" font-size="10.00">â€¢ Serves /assets/ â†’ static</text>
<text text-anchor="middle" x="222" y="-361" font-family="Arial" font-size="10.00">â€¢ Proxy /* â†’ Airflow</text>
</g>
<!-- nginx&#45;&gt;nginx_conf -->
<g id="edge24" class="edge">
<title>nginx&#45;&gt;nginx_conf</title>
<path fill="none" stroke="gray" stroke-dasharray="1,5" d="M222,-481.84C222,-461.9 222,-428.81 222,-406.01"/>
</g>
<!-- web_svc -->
<g id="node8" class="node">
<title>web_svc</title>
<path fill="#e8f5e9" stroke="black" d="M459,-398C459,-398 335,-398 335,-398 329,-398 323,-392 323,-386 323,-386 323,-374 323,-374 323,-368 329,-362 335,-362 335,-362 459,-362 459,-362 465,-362 471,-368 471,-374 471,-374 471,-386 471,-386 471,-392 465,-398 459,-398"/>
<text text-anchor="middle" x="397" y="-383" font-family="Arial" font-size="10.00">âš™ï¸ Service: airflow&#45;webserver</text>
<text text-anchor="middle" x="397" y="-372" font-family="Arial" font-size="10.00">ClusterIP:8080</text>
</g>
<!-- nginx&#45;&gt;web_svc -->
<g id="edge10" class="edge">
<title>nginx&#45;&gt;web_svc</title>
<path fill="none" stroke="green" d="M251.69,-496.27C277.9,-492.59 316.03,-483.99 343,-464 362.43,-449.6 376.82,-425.95 385.83,-407.58"/>
<polygon fill="green" stroke="green" points="389.12,-408.8 390.17,-398.26 382.78,-405.85 389.12,-408.8"/>
<text text-anchor="middle" x="392.5" y="-456.8" font-family="Arial" font-size="9.00" fill="green">ğŸ”Ÿ Proxy to Airflow</text>
</g>
<!-- html&#45;&gt;browser -->
<g id="edge6" class="edge">
<title>html&#45;&gt;browser</title>
<path fill="none" stroke="blue" stroke-dasharray="5,2" d="M95.91,-398.15C106.66,-414.09 124.68,-436.22 147,-446 192.6,-465.97 209.22,-446.78 259,-447 384.33,-447.56 641.38,-446.68 643,-446 662.38,-437.93 679.05,-421.12 690.79,-406.49"/>
<polygon fill="blue" stroke="blue" points="693.83,-408.28 697.12,-398.21 688.26,-404.03 693.83,-408.28"/>
<text text-anchor="middle" x="299" y="-456.8" font-family="Arial" font-size="9.00" fill="blue">6ï¸âƒ£ HTML displayed</text>
</g>
<!-- web_svc&#45;&gt;airflow_web -->
<g id="edge11" class="edge">
<title>web_svc&#45;&gt;airflow_web</title>
<path fill="none" stroke="green" d="M397.36,-361.92C397.87,-337.34 398.82,-291.75 399.43,-262.43"/>
<polygon fill="green" stroke="green" points="402.94,-262.13 399.64,-252.06 395.94,-261.99 402.94,-262.13"/>
<text text-anchor="middle" x="410.5" y="-317.8" font-family="Arial" font-size="9.00" fill="green">1ï¸âƒ£1ï¸âƒ£</text>
</g>
<!-- airflow_web&#45;&gt;browser -->
<g id="edge22" class="edge">
<title>airflow_web&#45;&gt;browser</title>
<path fill="none" stroke="darkgreen" stroke-dasharray="5,2" d="M441.39,-252.04C476.47,-266.73 527.95,-288.84 572,-310 589.2,-318.26 592.15,-323.26 610,-330 624.12,-335.33 629.08,-332.17 643,-338 654.66,-342.89 666.64,-349.69 677.13,-356.36"/>
<polygon fill="darkgreen" stroke="darkgreen" points="675.27,-359.33 685.55,-361.88 679.1,-353.47 675.27,-359.33"/>
<text text-anchor="middle" x="655.5" y="-322.8" font-family="Arial" font-size="9.00" fill="darkgreen">2ï¸âƒ£1ï¸âƒ£ Session created</text>
<text text-anchor="middle" x="655.5" y="-312.8" font-family="Arial" font-size="9.00" fill="darkgreen">Redirect to /home</text>
</g>
<!-- auth_mgr -->
<g id="node10" class="node">
<title>auth_mgr</title>
<path fill="#e8f5e9" stroke="black" d="M611,-160C611,-160 505,-160 505,-160 499,-160 493,-154 493,-148 493,-148 493,-136 493,-136 493,-130 499,-124 505,-124 505,-124 611,-124 611,-124 617,-124 623,-130 623,-136 623,-136 623,-148 623,-148 623,-154 617,-160 611,-160"/>
<text text-anchor="middle" x="558" y="-145" font-family="Arial" font-size="10.00">ğŸ” Custom Auth Manager</text>
<text text-anchor="middle" x="558" y="-134" font-family="Arial" font-size="10.00">Keycloak OIDC</text>
</g>
<!-- airflow_web&#45;&gt;auth_mgr -->
<g id="edge12" class="edge">
<title>airflow_web&#45;&gt;auth_mgr</title>
<path fill="none" stroke="red" d="M381.06,-215.96C370.55,-204.46 361.37,-189.37 371,-178 386.73,-159.43 455.1,-164.56 479,-160 480.28,-159.76 481.57,-159.51 482.87,-159.25"/>
<polygon fill="red" stroke="red" points="483.83,-162.63 492.95,-157.25 482.46,-155.77 483.83,-162.63"/>
<text text-anchor="middle" x="431" y="-190.8" font-family="Arial" font-size="9.00" fill="red">1ï¸âƒ£2ï¸âƒ£ Detect unauthenticated</text>
<text text-anchor="middle" x="431" y="-180.8" font-family="Arial" font-size="9.00" fill="red">Initiate OIDC flow</text>
</g>
<!-- role_mapper -->
<g id="node11" class="node">
<title>role_mapper</title>
<path fill="#e8f5e9" stroke="black" d="M519.5,-68C519.5,-68 412.5,-68 412.5,-68 406.5,-68 400.5,-62 400.5,-56 400.5,-56 400.5,-44 400.5,-44 400.5,-38 406.5,-32 412.5,-32 412.5,-32 519.5,-32 519.5,-32 525.5,-32 531.5,-38 531.5,-44 531.5,-44 531.5,-56 531.5,-56 531.5,-62 525.5,-68 519.5,-68"/>
<text text-anchor="middle" x="466" y="-53" font-family="Arial" font-size="10.00">ğŸ—ºï¸ Role Mapping Logic</text>
<text text-anchor="middle" x="466" y="-42" font-family="Arial" font-size="10.00">ROLE_MAPPING env var</text>
</g>
<!-- auth_mgr&#45;&gt;role_mapper -->
<g id="edge19" class="edge">
<title>auth_mgr&#45;&gt;role_mapper</title>
<path fill="none" stroke="purple" d="M540.26,-123.65C526.26,-109.95 506.56,-90.68 490.97,-75.42"/>
<polygon fill="purple" stroke="purple" points="493.28,-72.79 483.68,-68.3 488.38,-77.79 493.28,-72.79"/>
<text text-anchor="middle" x="562" y="-98.8" font-family="Arial" font-size="9.00" fill="purple">1ï¸âƒ£9ï¸âƒ£ Extract groups</text>
<text text-anchor="middle" x="562" y="-88.8" font-family="Arial" font-size="9.00" fill="purple">from token</text>
</g>
<!-- auth_mgr&#45;&gt;keycloak -->
<g id="edge13" class="edge">
<title>auth_mgr&#45;&gt;keycloak</title>
<path fill="none" stroke="red" d="M608.61,-160.06C620.91,-165.09 633.75,-171.12 645,-178 656.55,-185.07 656.38,-191.04 668,-198 677.43,-203.65 687.93,-208.67 698.36,-213.02"/>
<polygon fill="red" stroke="red" points="697.31,-216.36 707.89,-216.82 699.9,-209.86 697.31,-216.36"/>
<text text-anchor="middle" x="703" y="-190.8" font-family="Arial" font-size="9.00" fill="red">1ï¸âƒ£3ï¸âƒ£ Redirect to</text>
<text text-anchor="middle" x="703" y="-180.8" font-family="Arial" font-size="9.00" fill="red">/oauth/authorize</text>
</g>
<!-- auth_mgr&#45;&gt;keycloak -->
<g id="edge17" class="edge">
<title>auth_mgr&#45;&gt;keycloak</title>
<path fill="none" stroke="orange" d="M527.84,-160.07C512.17,-171.04 498.48,-185.52 510,-198 519.45,-208.24 621.2,-206.07 635,-208 655.63,-210.88 677.98,-215.02 698,-219.1"/>
<polygon fill="orange" stroke="orange" points="697.43,-222.56 707.93,-221.16 698.85,-215.7 697.43,-222.56"/>
<text text-anchor="middle" x="575.5" y="-185.8" font-family="Arial" font-size="9.00" fill="orange">1ï¸âƒ£7ï¸âƒ£ Exchange code for tokens</text>
</g>
<!-- role_mapper&#45;&gt;airflow_web -->
<g id="edge21" class="edge">
<title>role_mapper&#45;&gt;airflow_web</title>
<path fill="none" stroke="purple" d="M421.01,-68.01C396.76,-79.76 369.01,-98.01 355,-124 339.3,-153.12 346.84,-169.13 363,-198 365.09,-201.73 367.71,-205.3 370.59,-208.64"/>
<polygon fill="purple" stroke="purple" points="368.18,-211.19 377.64,-215.97 373.23,-206.34 368.18,-211.19"/>
<text text-anchor="middle" x="419.5" y="-144.8" font-family="Arial" font-size="9.00" fill="purple">2ï¸âƒ£0ï¸âƒ£ Map group â†’ Airflow role</text>
<text text-anchor="middle" x="419.5" y="-134.8" font-family="Arial" font-size="9.00" fill="purple">Admin, Op, Viewer, User, Public</text>
</g>
<!-- keycloak&#45;&gt;browser -->
<g id="edge14" class="edge">
<title>keycloak&#45;&gt;browser</title>
<path fill="none" stroke="red" stroke-dasharray="5,2" d="M743.84,-252.18C731.61,-266.43 715.81,-287.88 709,-310 704.9,-323.33 704.53,-338.8 705.34,-351.71"/>
<polygon fill="red" stroke="red" points="701.87,-352.21 706.25,-361.85 708.84,-351.58 701.87,-352.21"/>
<text text-anchor="middle" x="763.5" y="-317.8" font-family="Arial" font-size="9.00" fill="red">1ï¸âƒ£4ï¸âƒ£ Keycloak login page</text>
</g>
<!-- keycloak&#45;&gt;auth_mgr -->
<g id="edge16" class="edge">
<title>keycloak&#45;&gt;auth_mgr</title>
<path fill="none" stroke="orange" d="M757.55,-215.79C754.87,-203.44 749.33,-187.37 738,-178 721.93,-164.71 675.18,-155.85 633.35,-150.38"/>
<polygon fill="orange" stroke="orange" points="633.76,-146.9 623.4,-149.13 632.88,-153.85 633.76,-146.9"/>
<text text-anchor="middle" x="812.5" y="-190.8" font-family="Arial" font-size="9.00" fill="orange">1ï¸âƒ£6ï¸âƒ£ Callback with auth code</text>
<text text-anchor="middle" x="812.5" y="-180.8" font-family="Arial" font-size="9.00" fill="orange">/oauth&#45;authorized</text>
</g>
<!-- keycloak&#45;&gt;auth_mgr -->
<g id="edge18" class="edge">
<title>keycloak&#45;&gt;auth_mgr</title>
<path fill="none" stroke="orange" d="M798.93,-215.88C806.49,-212.97 814.42,-210.18 822,-208 846.3,-201.01 861.77,-217.39 878,-198 883.71,-191.18 883.93,-184.62 878,-178 861.95,-160.1 722.83,-150.45 633.39,-146.04"/>
<polygon fill="orange" stroke="orange" points="633.43,-142.54 623.28,-145.56 633.1,-149.53 633.43,-142.54"/>
<text text-anchor="middle" x="945.5" y="-190.8" font-family="Arial" font-size="9.00" fill="orange">1ï¸âƒ£8ï¸âƒ£ Access Token + ID Token</text>
<text text-anchor="middle" x="945.5" y="-180.8" font-family="Arial" font-size="9.00" fill="orange">(contains user groups)</text>
</g>
<!-- groups -->
<g id="node13" class="node">
<title>groups</title>
<path fill="#fce4ec" stroke="black" d="M967.5,-248.73C967.5,-250.53 936.8,-252 899,-252 861.2,-252 830.5,-250.53 830.5,-248.73 830.5,-248.73 830.5,-219.27 830.5,-219.27 830.5,-217.47 861.2,-216 899,-216 936.8,-216 967.5,-217.47 967.5,-219.27 967.5,-219.27 967.5,-248.73 967.5,-248.73"/>
<path fill="none" stroke="black" d="M967.5,-248.73C967.5,-246.92 936.8,-245.45 899,-245.45 861.2,-245.45 830.5,-246.92 830.5,-248.73"/>
<text text-anchor="middle" x="899" y="-231.5" font-family="Arial" font-size="10.00">ğŸ‘¥ LDAP/Keycloak Groups</text>
</g>
<!-- groups&#45;&gt;auth_mgr -->
<g id="edge20" class="edge">
<title>groups&#45;&gt;auth_mgr</title>
<path fill="none" stroke="gray" stroke-dasharray="1,5" d="M967.59,-221.67C1002.02,-213.13 1032.63,-199.2 1013,-178 987.8,-150.79 756.07,-144.66 633.4,-143.33"/>
<polygon fill="gray" stroke="gray" points="633.35,-139.83 623.31,-143.23 633.28,-146.83 633.35,-139.83"/>
<text text-anchor="middle" x="1053" y="-190.8" font-family="Arial" font-size="9.00" fill="gray">Groups included</text>
<text text-anchor="middle" x="1053" y="-180.8" font-family="Arial" font-size="9.00" fill="gray">in token</text>
</g>
</g>
</svg>
